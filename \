import { Canvas } from "@react-three/fiber";
import Experience from "./Components/Experience";
import Lights from "./Components/Lights";
import PostProcessing from "./Components/PostProcessing";
import { Leva } from "leva";
import MousePan from "./Components/MousePan";
import { Selection } from "@react-three/postprocessing";
import { useState } from "react";

const App = () => {
  const [isAnimating, setIsAnimating] = useState(true);
  const [isBackButtonHovered, setIsBackButtonHovered] = useState(false);
  const [backClicked, setBackClicked] = useState(0);

  return (
    <>
      <div
        className="backButton"
        onMouseEnter={() => {
           setIsBackButtonHovered(true)}}
        onMouseLeave={() => {setIsBackButtonHovered(false)}
        onClick={() => setBackClicked(prev => prev + 1)}
        style={{
          transform: isBackButtonHovered ? 'scale(0.9)' : 'scale(1)',
          transition: 'transform 0.2s ease-in-out',
          cursor: 'pointer',
        }}
      >
        <img
          src="/buttons/back.svg"
          style={{
            height: "100%",
            width: "100%",
            pointerEvents: 'none',
          }}
        />
      </div>
      <Leva collapsed />
      <Canvas
        shadows
        camera={{
          position: [4.0, 2.5, 5.0],
          rotation: [-0.24, 0.52, 0.1],
        }}
      >
        {/* <OrbitControls /> */}
        <color attach="background" args={["#afa696"]} />
        <Lights />
        <Selection>
          <Experience setIsAnimating={setIsAnimating} backClicked={backClicked} />
          <PostProcessing />
        </Selection>
        <MousePan isAnimating={isAnimating} />
      </Canvas>
    </>
  );
};

export default App;
